.menu {
    display: block;
    position: relative;
    background: $color3;
    max-width: none;
    width: 100%;
    padding: 0 50px;
    &::before,
    &::after {
        content: "";
        position: absolute;
        top: 0;
        z-index: 1;
        width: 20px;
        height: 100%;
        background: inherit;
    }
    &::before {
        left: 0;
        @include setCurve(15, -10);
    }
    &::after {
        right: 0;
        @include setCurve(-15, 10);
    }

    li {
        > a {
            padding: 0;
            margin: 0;
            line-height: inherit;
            border-bottom: none;
            &:after {
                display: none;
            }
        }
        &.selected {
            position: static;
            width: auto;
            height: auto;
            background: none;
            > a {
                background: none;
                margin: 0;
                padding: 0;
                font-size: inherit;
            }
        }
        ul {
            display: block;
        }
    }

    .lvl-1 {
        display: flex;
        justify-content: center;
        > li {
            > a {
                margin: 0 5px;
                padding: 0 5px;
                &::after {
                    display: block;
                    content: "";
                    transform: none;
                    right: auto;
                    left: 0;
                    top: auto;
                    bottom: 0;
                    width: 0;
                    border-width: 4px;
                    border-color: transparent transparent currentColor transparent;
                    transition: all .2s ease;
                    opacity: 0;
                }
            }
            &.selected {
                > a {
                    background: none;
                    &::after {
                        opacity: 1;
                        width: 100%;
                    }
                }
                .sub {
                    display: flex;
                }
            }
        }
    }

    .sub {
        $subGap: 300px;
        display: none;
        position: absolute;
        left: -$subGap;
        top: 100%;
        z-index: 2;
        width: calc(100% + #{$subGap * 2});
        height: 360px;
        background: $color3;
        font-family: $font2;
        line-height: $line-height + .5;
        .r1,
        .r2 {
            position: relative;
            overflow: hidden;
        }
        .r1 {
            flex-basis: $subGap;
            @include setCurve(15, 48);
            z-index: 1;
            background: $color3;
            > * {
                @include setCurve(-15, 0);
            }
            + .r2 {
                flex: 1;
            }
        }
        .r2 {
            margin-left: auto;
            margin-right: auto;
        }
    }

    .skew-object {
        position: absolute;
        left: 0;
        top: 0;
        z-index: 2;
        width: 400px;
        height: 100%;
        background: rgba(215, 0, 10, 0.6);
        @include setCurve(15, -52);
    }

    $iw: 248px;
    .img1, .img2 {
        position: absolute;
        top: 0;
        width: $iw;
        height: 100%;
    }
    .img1 {
        right: -$iw/2;
        animation: animation-01 .5s cubic-bezier(0.215, 0.610, 0.355, 1.000); //easeOutCubic
    }
    .img2 {
        left: -75px;
        animation: animation-02 .32s cubic-bezier(0.215, 0.610, 0.355, 1.000); //easeOutCubic
        + .lvl-2 {
            padding-left: $iw/2 + 150px;
            max-width: 1000px;
        }
    }

    .lvl-2 {
        height: 100%;
        column-count: 4;
        column-gap: 20px;
        padding: 30px;
        animation: animation-02 .5s cubic-bezier(0.215, 0.610, 0.355, 1.000); //easeOutCubic
        li {
            break-inside: avoid;
            &.single {
                height: 100%;
            }
            a {
                display: inline-flex;
            }
        }
    }

    .lvl-3 {
        > li {
            > a {
                font-weight: 400;
            }
        }
    }


    .collection {
        .sub {
            height: auto;
        }
        .lvl-2 {
            column-count: 3;
        }
        .banner {
            max-width: 190px;
        }
    }
}